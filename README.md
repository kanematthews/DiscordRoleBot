# DiscordRoleBot
### This is a Discord Role Bot that is used for automatically assigning a role to a user on entry of a server. 

### Also the bot expects an ID value from them once they join into a restricted server channel that only new people can see into and out of. Which is something a server Admin will require to set up and is shown how in the Admin Instructions.

### Once that ID is verified with the CSV file that holds all ID values (generated by the client or admin) the Discord user is given the correct roles and name in line with the CSV file given.

### Additionally this is used as a multi-purpose role bot, including:
### -Reaction Roles! Utilising button based role assignment slash commands!

# User Instructions:

## 1. On joining 

On entering the server you are notified in server and in your DM's from the bot exclaiming that you need to put your UP number into the channel you can access. You'll find you can only access #norole.

## 2. On Entering UP Number.

Entering your UP number inside will give you your roles, access to the collective channels that co-align with the course and year you're in at University and change your name to your First Name and Last name Initial. - Your UPNumber. Additionally you will be notified by the bot of these changes through your DMs and given a member role within the server.

# Admin Instructions:
## 1. Invite the Bot

The bot invite can be found at this link. Once it is clicked make sure you invite it to the correct corresponding server you want the bot in.
https://discord.com/api/oauth2/authorize?client_id=1099684282986938499&permissions=8&scope=bot

## 2. Edit Roles
Next, in line with the clip below, click to the right of your server name on the downward arrow and click **Server Settings** then click on **Roles** and click **Create Role**

https://github.com/kanematthews/DiscordRoleBot/assets/134295646/c1814d32-efdc-47c3-822b-9acad2f98375


Then, in line with the clip below, create a new role called **"norole"** and click save changes 


https://github.com/kanematthews/DiscordRoleBot/assets/134295646/fd002964-3122-403d-87fa-65463723a1f0


After, in line with the clip below, click the + and create another role called **"member"** and click save changes


https://github.com/kanematthews/DiscordRoleBot/assets/134295646/f9105ef3-f715-453c-98bd-d9b3ee6d3bcc


## 3. Change text-channel permissions

Next, in line with the clip below, create a channel in your server called "norole" and make it a private channel 


https://github.com/kanematthews/DiscordRoleBot/assets/134295646/c8823d28-2d12-48e2-b96a-234debb68e11


Then, in line with the clip below, click next and make sure to add @norole to it.


https://github.com/kanematthews/DiscordRoleBot/assets/134295646/bb2e7a59-c623-4894-954e-80f4af06690a


After, in line with the clip below, right click your new #norole channel and click **Edit Channel**, head to **Permissions** and scroll down to where you see **Roles/Members**


https://github.com/kanematthews/DiscordRoleBot/assets/134295646/48015c87-7196-4d46-988f-e154108657db


Next, in line with the clip below, click **norole** and allow them to **Send Messages** and **Read Message History** and click **Save Changes**


https://github.com/kanematthews/DiscordRoleBot/assets/134295646/2b910494-f106-4f36-9742-0fa515dd5d37


## 4. You're done!

Ensure you follow the steps for any future channels you make similarly by ensuring only members can see into the channel and @everyone can't see into it. Making new users HAVE to accept the stipulations of your entry system.

Also ensure the bots role "RoleBot" is above all other roles you want it to interact with otherwise it will be unable to assign it!

In order to make the admin role work ensure you make an Admin role and give them the permission "Administrator" within the settings.

# Admin/Client Bot Installation Instructions:

NOTE: ENSURE YOU SET UP GO THROUGH THE ADMIN SETUP FOR THE SERVER FIRST AND FOLLOW ALL STEPS.

## 1. Download or fork the code from this file.

## 2. Install modules.

Paste these in the terminal to make sure you have them:
 - npm i discord.js
 - npm i node.js
 - npm i fast-csv
 - npm i dotenv

## 3. Create .env file and input base data.

Inside of the RoleBot directory create a .env file with the following values:
- token = YOUR BOT TOKEN HERE 
- clientid = YOUR BOT CLIENT TOKEN HERE
- channelid = YOUR NOROLE SERVER CHANNEL ID HERE
- adminpass = "YOUR SPECIFIED ADMIN GIVING PASSWORD HERE"

## 4. Create a CSV folder inside of the SRC directory

Paste a CSV file inside the new folder but save it to studentdata.csv or change it within the code (inside index.js)

## 5. Go to https://discord.com/developers/applications

1. Create a new application and name it what you want, click agree.

2. Click the "Bot" tab and tick the Priveleged Gateway Intents for:
 - "Presence Intent"
 - "Server Members Intent"
 - "Message Content Intent"

3. Scroll up and click reset token copy that token and paste it in the .env file under token. e.g: token = "YOUR TOKEN HERE"

4. Click OAuth2 and copy the ClientID and post that in the clientid section in the .env file. like before.

5. Click the URL Generator 
    Within SCOPES tick the following:
  - bot
  - messages.read
  - guilds
  - guilds.join

    Within BOT PERMISSIONS tick Administrator

    Scroll down and click copy generated URL and enter that yourself into google and invite the Bot to your Discord server.

6. Enable Developer mode on Discord by going into the User Settings -> Advanced -> Developer Mode and ticking it.

    Then open your Discord server where you have followed the previous Admin instructions and right click your "norole" channel. Click copy Channel ID and post that in your .env file in the channelid = "channel ID here"

    Here you can also specify a specific password inside the .env file where adminpassword = "admin password here" 
    
    Incase you wish to set one for when your admins join the server. Simply tell them to enter that phrase or password during the verification process and they will be given the role Admin should it have been made in the Server.

7. Open the console within your code and open a node.js console and type nodemon 

The bot should come online!

# Slash Commands:

/buttonrole [role1] [role2] [role3] [role4] [role5] - NOTE: role1 is required, role2,3,4,5 are optional add as many as you'd like! 

/help - This will display the help command and show what instructions you could use in the server.
